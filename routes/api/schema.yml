openapi: 3.0.0
info:
  title: OpenStudent
  version: "1.0"
servers:
  - url: "http://localhost:3001"
    description: DEV server
paths:
  /students:
    get:
      summary: Get all student records
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                    description: student identifier
                  name:
                    type: string
                    description: student name
                  grade:
                    type: string
                    description: current grade level
                  school:
                    type: string
                    description: current school name
                  studentUrl:
                    type: string
                    description: link to student details
                required:
                  - id
                  - name
                  - grade
                  - school
                  - studentUrl
        "400":
          description: Bad Request
      operationId: get-students
  "/students/{id}":
    parameters:
      - schema:
          type: string
        name: id
        description: student identifier
        in: path
        required: true
    get:
      summary: Get individual student record
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    description: student identifier
                    type: number
                  name:
                    type: string
                    description: student name
                  year:
                    type: object
                    description: school year (end)
                    properties:
                      "{year}":
                        type: object
                        properties:
                          grade:
                            type: string
                            description: current grade level
                          homeroom:
                            type: object
                            description: homeroom
                            properties:
                              room:
                                type: string
                                description: room number
                              teacher:
                                type: string
                                description: "teacher last name, first name"
                          gradesUrl:
                            type: string
                            description: link to student grades
                          classworkUrl:
                            type: string
                            description: link to student classwork
                          building:
                            type: string
                            description: current school name
                          courses:
                            type: array
                            items:
                              type: string
                              description: course identifiers
        "201":
          description: Created
        "400":
          description: Bad Request
      operationId: get-student-id
  "/students/{id}/classwork":
    parameters:
      - schema:
          type: string
        name: id
        description: student identifier
        in: path
        required: true
    get:
      summary: Get student classwork records
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: student identifier
                  classwork:
                    type: array
                    items:
                      $ref: "#/components/schemas/classwork"
                  name:
                    type: string
                    description: student name
                  interval:
                    $ref: "#/components/schemas/interval"
        "400":
          description: Bad Request
      operationId: get-students-id-classwork
      parameters:
        - schema:
            type: integer
            maximum: 6
            minimum: 0
          in: query
          name: mp
          description: |-
            marking period
            * valid int: `0`-`6`
            * `0` retrieves all records
        - schema:
            type: integer
          in: query
          name: sy
          description: school year
        - schema:
            type: boolean
          in: query
          name: group
          description: group classwork by course
      tags: []
  "/students/{id}/grades":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Get student grades
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: student identifier
                  name:
                    type: string
                    description: student full name
                  gradesAverageUrl:
                    type: string
                  courseGrades:
                    type: object
                    properties:
                      "{courseId}":
                        type: object
                        description: course identifier (as key)
                        properties:
                          "{category}":
                            type: array
                            description: category name (as key)
                            items:
                              type: number
                              description: scores for assignments
      operationId: get-students-id-grades
      parameters:
        - schema:
            type: integer
            maximum: 6
            minimum: 0
          in: query
          name: mp
          description: |-
            marking period
            * valid int: `0`-`6`
            * `0` retrieves all records
        - schema:
            type: integer
          in: query
          name: sy
          description: school year
  "/students/{id}/grades/average":
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    get:
      summary: Get student grade averages
      tags: []
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: student identifier
                  name:
                    type: string
                    description: student full name
                  comments:
                    type: array
                    items:
                      type: object
                      properties:
                        assignment:
                          type: string
                          description: description of assignment
                        score:
                          type: number
                          description: score for assignment
                        comment:
                          type: string
                          description: comment for assignment
                  courseGradeAverage:
                    type: object
                    properties:
                      courseId:
                        type: string
                        description: course identifier
                      courseName:
                        type: string
                        description: course name
                      average:
                        type: number
                        description: course average
      operationId: get-students-id-grades-average
      parameters:
        - schema:
            type: integer
            maximum: 6
            minimum: 0
          in: query
          name: mp
          description: |-
            marking period
            * valid int: `0`-`6`
            * `0` retrieves all records
        - schema:
            type: integer
          in: query
          name: sy
          description: school year
components:
  schemas:
    classwork:
      title: classwork
      type: object
      properties:
        due:
          type: string
          description: date assignment was due
        dueMs:
          type: number
          description: "date due, in milliseconds"
        courseId:
          type: string
          description: course identifier
        assigment:
          type: string
          description: description for assignment
        score:
          type: number
          description: score for assignment
        catWeight:
          type: number
          description: scoring weight for assignment category
        comment:
          type: string
          description: comment on assignment
        assigned:
          type: string
          description: date assigned
        courseName:
          type: string
          description: course name
    interval:
      title: interval
      type: object
      properties:
        start:
          type: number
          description: interval start in milliseconds
        end:
          description: interval end in milliseconds
          type: number
        schoolYear:
          type: string
          description: school year in YYYY format
          pattern: "^20\\d{2}$"
        markingPeriod:
          type: string
          description: marking period (1-6)
          pattern: "^[1-6]$"
